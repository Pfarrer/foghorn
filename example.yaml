version: "1.0"
state_log_period: "24h"
secret_store_file: "~/.config/foghorn/secrets.enc"

---
name: "http-health-check"
description: "Checks health of example.com website"
enabled: true
image: "ghcr.io/pfarrer/foghorn-http-check:1"
schedule:
  interval: "1m"
evaluation:
  - type: "json"
    condition: "status == 'pass'"
    expected: true
env:
  CHECK_URL: "https://example.com"
  EXPECTED_STATUS: "200"
  REQUEST_TIMEOUT: "10"

---
name: "openssl-health-check"
description: "Checks validity of example.com TLS certificate"
enabled: true
image: "ghcr.io/pfarrer/foghorn-openssl-check:1"
schedule:
  interval: "1h"
evaluation:
  - type: "json"
    condition: "status == 'pass'"
    expected: true
env:
  HOST: "example.com"
  PORT: 443

---
name: "disk-space-check"
description: "Checks root filesystem disk usage"
enabled: true
image: "ghcr.io/pfarrer/foghorn-disk-check:1"
schedule:
  interval: "5m"
evaluation:
  - type: "json"
    condition: "status == 'pass'"
    expected: true
env:
  MOUNT_POINT: "/"
  WARNING_THRESHOLD_PERCENT: "80"
  CRITICAL_THRESHOLD_PERCENT: "90"
  CHECK_INODES: "true"

---
name: "mail-send-receive-check"
description: "Sends and verifies probe email"
enabled: false
image: "ghcr.io/pfarrer/foghorn-mail-send-receive-check:1"
schedule:
  interval: "15m"
evaluation:
  - type: "json"
    condition: "status == 'pass'"
    expected: true
env:
  SMTP_HOST: "smtp.example.com"
  SMTP_USERNAME: "probe-smtp"
  SMTP_PASSWORD: "secret://mail/smtp_password"
  MAIL_FROM: "probe@example.com"
  MAIL_TO: "probe@example.com"
  RECEIVE_HOST: "imap.example.com"
  RECEIVE_USERNAME: "probe-imap"
  RECEIVE_PASSWORD: "secret://mail/imap_password"
  DEADLINE_SECONDS: "60"
